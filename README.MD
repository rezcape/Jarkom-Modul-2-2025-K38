# 📄 Laporan Komdat Jarkom Modul 2 — 2025

## 👥 Anggota Kelompok

| Nama                     | NRP        |
| ------------------------ | ---------- |
| Ahmad Syauqi Reza        | 5027241085 |
| Putri Joselina Silitonga | 5027241116 |

## Deskripsi Laporan 📝

---

# Soal 1

Pada praktikum ini digunakan **GNS3 Web UI** dengan host IP `192.230.1.1`.  
Dibuat sebuah project dengan topologi sebagai berikut:

- Eonwe = panglima/gerbang (router)
- Earendil, Elwing = klien Barat
- Cirdan, Elrond, Maglor = klien Timur
- Sirion = gerbang pelabuhan (reverse proxy)
- Tirion = penjaga nama utama (ns1)
- Valmar = penjaga nama bayangan (ns2)
- Lindon = pelabuhan web statis
- Vingilot = kapal web dinamis
- **Eonwe** merentangkan tiga jalur: Barat untuk **Earendil** dan **Elwing**, Timur untuk **Círdan**, **Elrond**, **Maglor**, serta pelabuhan DMZ bagi **Sirion**, **Tirion**, **Valmar**, **Lindon**, **Vingilot**.
- Router terhubung ke **internet** melalui **NAT1**.
- Router juga terhubung ke **dua switch**.
- Masing-masing switch kemudian menghubungkan **dua client**.

Struktur topologi ini dapat dilihat pada gambar berikut:

![Image_1](asset/1.png)

# Soal 2

Kita diminta untuk mengkonfigurasi **Eonwe** agar bisa berfungsi seperti router(contoh router wifi), semua perangkat di sekitarnya bisa mengakses internet menggunakan satu koneksi yang sama. Proses ini disebut NAT atau Network Address Translation.

Buat perintah untuk mengizinkan semua jaringan internal untuk "nebeng" ke"" koneksi **Eanwe** ke internet seperti kode berikut :

```
iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE -s 192.230.0.0/16
```

Sehingga ketika menguji melalui salah satu klien internal, seperti **Cirdan**, maka ketika dilakukan ping 8.8.8.8 (ping google) akan mendapat respons.

![image_2](asset/2.png)

# Soal 3

Pada soal ini, kita diminta untuk memverifikasi lagi bahwa semua konfigurasi sudah benar dengan melakukan ping dari klien ke server di jaringan DMZ. Berikut hasil ping dari **Earendil**(Klien Barat) ke **Elrond**(Klien Timur).

![image_3](asset/3.png)

Kemudian agar semua perangkat bisa menginstall paket atau mengakses internet via nama domain sejak awal, kita diminta untuk menjalankan perintah seperti berikut:

```
echo "nameserver 192.168.122.1" > /etc/resolv.conf
```

# Soal 4

Pada bagian ini, kita akan mengkonfigurasi DNS Server. Tirion akan berperan sebagai DNS Master (ns1) dan Valmar sebagai DNS Slave (ns2) untuk domain K38.com.

## Konfigurasi DNS Master (Tirion)

1. Instalasi BIND9
   Langkah pertama adalah menginstal paket BIND9 pada Tirion.

```
apt-get update
apt-get install bind9 -y
```

2. Konfigurasi Domain Utama
   Selanjutnya, kita mendefinisikan domain K38.com sebagai master di file /etc/bind/named.conf.local.

```
zone "K38.com" {
    type master;
    file "/etc/bind/[K38.com/ns1.K38.com](https://K38.com/ns1.K38.com)";
};
```

3. Membuat File Zone
   Kita membuat direktori baru untuk menyimpan file konfigurasi domain dan kemudian membuat file zone-nya.

```
mkdir /etc/bind/K38.com
nano /etc/bind/[K38.com/ns1.K38.com](https://K38.com/ns1.K38.com)
```

Isi dari file ns1.K38.com adalah sebagai berikut, yang berisi record SOA, NS (Nameserver), dan A (Address) untuk domain K38.com.

```
$TTL    604800
@       IN      SOA     ns1.K38.com. root.ns1.K38.com. (
                      2025100401 ; Serial
                      604800     ; Refresh
                      86400      ; Retry
                      2419200    ; Expire
                      604800 )   ; Negative Cache TTL
;
@       IN      NS      ns1.K38.com.
@       IN      NS      ns2.K38.com.
@       IN      A       192.230.3.3
@       IN      A       192.230.3.4
```

4. Mengatur Resolver dan Restart Service
   Agar Tirion dapat menggunakan DNS-nya sendiri, kita atur /etc/resolv.conf. Setelah itu, restart layanan BIND9.

### Mengisi /etc/resolv.conf

```
nameserver 192.230.3.3
nameserver 192.230.3.4
```

### Restart BIND9

```
service bind9 restart
```

### Pengujian DNS Master

Pengujian dilakukan dengan melakukan ping ke K38.com dari Tirion. Hasilnya menunjukkan bahwa DNS Master berhasil menerjemahkan nama domain menjadi alamat IP.

![image 4.1](asset/4.1.png)

## Konfigurasi DNS Slave (Valmar)

1. Perbarui Konfigurasi Master
   Sebelum mengatur slave, kita perlu memperbarui konfigurasi di DNS Master (Tirion) agar mengizinkan transfer data zone ke slave.

```
// /etc/bind/named.conf.local di Tirion
zone "K38.com" {
    type master;
    notify yes;
    also-notify { 192.230.3.4; };
    allow-transfer { 192.230.3.4; };
    file "/etc/bind/[K38.com/ns1.K38.com](https://K38.com/ns1.K38.com)";
};
```

2. Jangan lupa restart BIND9 di Tirion setelah mengubah konfigurasi.

```
service bind9 restart
```

3. Instalasi dan Konfigurasi di Slave
   Sekarang di Valmar, kita install BIND9 dan mengkonfigurasinya sebagai slave.

```
apt-get update
apt-get install bind9 -y
```

4. Kemudian atur file /etc/bind/named.conf.local di Valmar.

```
zone "K38.com" {
    type slave;
    masters { 192.230.3.3; };
    file "/etc/bind/[K38.com/ns1.K38.com](https://K38.com/ns1.K38.com)";
};
```

5. BIND9 akan secara otomatis mengambil data zone dari master. Setelah itu, restart service BIND9 di Valmar.

```
service bind9 restart
```

### Pengujian DNS Slave

Untuk memastikan DNS Slave berfungsi, layanan BIND9 pada DNS Master (Tirion) dimatikan sementara. Kemudian, pengujian ping dilakukan dari klien ke K38.com. Hasilnya menunjukkan bahwa domain K38.com masih dapat diakses, membuktikan bahwa DNS Slave telah mengambil alih tugas resolusi nama domain.

![image 4.2](asset/4.2.png)

# Soal 5



# Soal 6: Konfigurasi DNS Master-Slave

Konfigurasi **DNS Master-Slave** antara **Tirion (ns1)** sebagai master dan **Valmar (ns2)** sebagai slave untuk domain `k38.com`.

---

### 1. Konfigurasi di Tirion (MASTER)

#### Buat folder zona
```bash
mkdir -p /etc/bind/zones

#### Buat file zona master
nano /etc/bind/zones/db.k38.com 

#### Konfigurasi BIND master
nano /etc/bind/named.conf.local 

#### Restart BIND
pkill named
named -4 -u bind -c /etc/bind/named.conf
```

2. Konfigurasi di Valmar (SLAVE)
#### Persiapan folder
```bash
mkdir -p /var/lib/bind
chown bind:bind /var/lib/bind
```

#### Konfigurasi BIND slave
```bash
nano /etc/bind/named.conf.local

Restart BIND
pkill named
named -4 -u bind -c /etc/bind/named.conf
```

### Verifikasi
Kita bisa liat bahwa Valmar dan Tirion mempunyai SOA yg sama 

## 3.1 Testing Zone Transfer
```bash
dig @192.230.3.3 k38.com AXFR

## 3.2 Cek File Zona di Valmar
ls -l /var/lib/bind/

## 3.3 Verifikasi Serial SOA
#### Di Tirion
dig @192.230.3.3 k38.com SOA

#### Di Valmar  
dig @192.230.3.4 k38.com SOA
```

##foto


# No 7

### IP & CNAME Mapping
| Host / Alias        | IP / Canonical Name      |
|-------------------|------------------------|
| sirion.k38.com     | 192.230.3.5 (gateway)  |
| lindon.k38.com     | 192.230.3.6 (web statis) |
| vingilot.k38.com   | 192.230.3.7 (web dinamis) |
| www.k38.com        | sirion.k38.com         |
| static.k38.com     | lindon.k38.com         |
| app.k38.com        | vingilot.k38.com       |


## Langkah Konfigurasi

### 1️⃣ Tirion (MASTER)
1. **Edit file zona**
```bash
nano /etc/bind/zones/db.k38.com
```

### 2️⃣ Valmar (SLAVE)

#### Restart BIND untuk zone transfer

```bash 
pkill named
named -4 -u bind -c /etc/bind/named.conf

#### Verifikasi zone transfer

dig @192.230.3.3 k38.com AXFR
```

### 3️⃣ Verifikasi dari Klien

#### Konfigurasi resolver
```
nano /etc/resolv.conf

Isi:
nameserver 192.230.3.3
nameserver 192.230.3.4
```

#### Test A Records
```bash 
dig sirion.k38.com
dig lindon.k38.com
dig vingilot.k38.com
```


#### Test CNAME Records
``` bash 
dig www.k38.com
dig static.k38.com
dig app.k38.com
```

#foto7-

# Soal 8
Membuat **reverse DNS zone** untuk segmen **192.230.3.0/24** agar pencarian balik IP menampilkan hostname yang benar.

## ⚙️ Konfigurasi
**Tirion (ns1):** 192.230.3.3  
**Valmar (ns2):** 192.230.3.4  
**Reverse Zone:** `3.230.192.in-addr.arpa`


## 🔧 Langkah

### Di Tirion (MASTER)
```bash
mkdir -p /etc/bind/zones
nano /etc/bind/named.conf.local

Isi:

zone "3.230.192.in-addr.arpa" {
  type master;
  file "/etc/bind/zones/db.192.230.3";
  allow-transfer { 192.230.3.4; };
};
```


#### Buat file zona:
```bash 
nano /etc/bind/zones/db.192.230.3

Isi:

$TTL 604800
@ IN SOA ns1.k38.com. root.ns1.k38.com. (2025101201 604800 86400 2419200 604800)
@ IN NS ns1.k38.com.
@ IN NS ns2.k38.com.
2 IN PTR sirion.k38.com.
5 IN PTR lindon.k38.com.
6 IN PTR vingilot.k38.com.
```


#### Validasi & restart:
```bash 
named-checkconf
named-checkzone 3.230.192.in-addr.arpa /etc/bind/zones/db.192.230.3
pkill named
named -f &
```

#### Di Valmar (SLAVE)
```bash 
nano /etc/bind/named.conf.local
Isi:

zone "3.230.192.in-addr.arpa" {
  type slave;
  masters { 192.230.3.3; };
  file "/var/lib/bind/db.192.230.3";
};
```

#### Restart & cek:
```bash pkill named
named -f &
ls -l /var/lib/bind/
```

#### Verifikasi
```bash 
# Resolver
nano /etc/resolv.conf
nameserver 192.230.3.3

# Reverse lookup
dig -x 192.230.3.2
dig -x 192.230.3.5
dig -x 192.230.3.6

# Dari slave
dig -x 192.230.3.2 @192.230.3.4
```

#foto 8


# Soal 9
Menjalankan web statis pada hostname **static.k38.com** dengan folder `/annals/` yang menampilkan *autoindex* agar isinya dapat ditelusuri.

### DNS (Tirion)
```bash
nano /etc/bind/zones/db.k38.com

### Tambah:
static  IN  A  192.230.3.5
```
### Apache (Lindon)
```bash 
apt install apache2 -y
mkdir -p /var/www/static.k38.com/annals
echo "File test" > /var/www/static.k38.com/annals/test.txt

### Virtual host:
<VirtualHost *:80>
 ServerName static.k38.com
 DocumentRoot /var/www/static.k38.com
 <Directory /var/www/static.k38.com/annals>
     Options +Indexes
     Require all granted
 </Directory>
</VirtualHost>
```

### Aktifkan:
```bash 
a2ensite static.k38.com.conf
a2enmod autoindex
apache2ctl restart

### Verifikasi
curl http://static.k38.com/annals/
```


# Soal 10
Menjalankan web dinamis (PHP-FPM) pada hostname app.k38.com dengan beranda dan halaman about, serta menerapkan rewrite sehingga /about berfungsi tanpa akhiran .php.

### DNS (Tirion)
```bash 
nano /etc/bind/zones/db.k38.com

Tambah:
app  IN  A  192.230.3.6
``` 
### Apache & PHP-FPM (Vingilot)
```bash 
apt install apache2 php-fpm -y
a2enmod proxy_fcgi setenvif rewrite
a2enconf php8.4-fpm
service apache2 reload

### File web:
mkdir -p /var/www/app.k38.com
echo "<h1>Selamat datang di App K38</h1>" > /var/www/app.k38.com/index.php
echo "<h1>Ini halaman About</h1>" > /var/www/app.k38.com/about.php
```
### Virtual host:
```bash 
<VirtualHost *:80>
 ServerName app.k38.com
 DocumentRoot /var/www/app.k38.com
 <Directory /var/www/app.k38.com>
     AllowOverride All
     Require all granted
 </Directory>
</VirtualHost>
```
### .htaccess:
```bash
RewriteEngine On
RewriteRule ^about$ about.php [L]
```
### Verifikasi
```bash
curl http://app.k38.com/
curl http://app.k38.com/about
```
#foto10









